<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>My Study Tracker</title>
  <style>
    :root{
      --bg:#f3f5fb;
      --card:#ffffff;
      --accent:#2f4f9b;
      --muted:#6b6f78;
      --pill:#e9efff;
      --glass: rgba(0,0,0,0.04);
    }
    *{box-sizing:border-box}
    body{
      margin:0;
      font-family:Inter, system-ui, -apple-system, "Segoe UI", Roboto, "Helvetica Neue", Arial;
      background:var(--bg);
      color:#222;
      -webkit-font-smoothing:antialiased;
      -moz-osx-font-smoothing:grayscale;
    }

    header{
      text-align:center;
      padding:48px 20px 10px;
    }
    header h1{
      margin:0;
      font-size:44px;
      color:var(--accent);
      letter-spacing:-0.5px;
    }
    main{
      max-width:1100px;
      margin: 18px auto 60px;
      padding: 0 18px;
    }

    /* Goal columns */
    .cols{
      display:flex;
      gap:20px;
      flex-wrap:wrap;
      justify-content:center;
    }
    .col{
      background:var(--card);
      border-radius:12px;
      padding:18px;
      width:320px;
      box-shadow:0 6px 18px var(--glass);
    }
    .col h3{
      margin:0 0 12px 0;
      color:#25304a;
      font-size:20px;
    }
    .add-row{
      display:flex;
      gap:8px;
      margin-bottom:12px;
    }
    .add-row input{
      flex:1;
      padding:12px;
      border-radius:10px;
      border:1px solid #e6e9f2;
      outline:none;
      background: #fbfbff;
    }
    .add-row button{
      padding:10px 12px;
      border-radius:10px;
      border:none;
      background:var(--accent);
      color:white;
      cursor:pointer;
    }

    ul.goal-list{
      list-style:none;
      padding:0;
      margin:0;
    }
    ul.goal-list li{
      display:flex;
      align-items:center;
      gap:10px;
      padding:10px 6px;
      border-radius:8px;
      transition:background 0.15s;
    }
    ul.goal-list li:hover{ background: #fbfbff; }
    ul.goal-list input[type="checkbox"]{ width:18px; height:18px; cursor:pointer; }
    .goal-text{ flex:1; color:var(--muted); }
    .goal-actions{ display:flex; gap:6px; }
    .small-btn{
      border:none;
      background:transparent;
      cursor:pointer;
      color:#888;
      padding:6px;
      border-radius:6px;
    }

    /* Centered pomodoro card */
    .pomodoro-wrap{
      margin-top:34px;
      display:flex;
      justify-content:center;
    }
    .pomodoro{
      width:520px;
      background:var(--card);
      border-radius:14px;
      padding:26px;
      box-shadow:0 8px 26px var(--glass);
      text-align:center;
    }
    .pomodoro h2{ margin:6px 0 8px; color:var(--accent); }
    #display{
      font-size:48px;
      font-weight:600;
      margin:10px 0 14px;
      color:#222;
    }

    .controls{ display:flex; gap:10px; justify-content:center; margin-top:10px; flex-wrap:wrap; }
    .controls button{
      background:#3a74ff;
      color:white;
      border:none;
      padding:10px 18px;
      border-radius:10px;
      cursor:pointer;
      font-weight:600;
    }
    .controls button.secondary{
      background:#9ab2ff;
    }

    .settings{
      display:flex;
      gap:12px;
      justify-content:center;
      margin-top:14px;
      flex-wrap:wrap;
    }
    .settings select{
      padding:8px 10px;
      border-radius:8px;
      border:1px solid #e6e9f2;
      background:var(--pill);
      font-weight:600;
    }

    footer{
      text-align:center;
      margin:40px 0 80px;
      color:#666;
      font-size:14px;
    }

    @media (max-width:1020px){
      .cols{justify-content:space-around}
      .pomodoro{width:420px}
    }
    @media (max-width:720px){
      .cols{flex-direction:column; align-items:center}
      .col{width:92%}
      header h1{font-size:34px}
      .pomodoro{width:92%}
    }
  </style>
</head>
<body>
  <header>
    <h1>My Study Tracker</h1>
  </header>

  <main>
    <div class="cols">
      <!-- Daily -->
      <div class="col" id="daily-col">
        <h3>Daily Goals</h3>
        <div class="add-row">
          <input id="daily-input" placeholder="Add a goal" />
          <button onclick="addGoal('daily')">Add</button>
        </div>
        <ul class="goal-list" id="daily-list"></ul>
      </div>

      <!-- Weekly -->
      <div class="col" id="weekly-col">
        <h3>Weekly Goals</h3>
        <div class="add-row">
          <input id="weekly-input" placeholder="Add a goal" />
          <button onclick="addGoal('weekly')">Add</button>
        </div>
        <ul class="goal-list" id="weekly-list"></ul>
      </div>

      <!-- Long-Term -->
      <div class="col" id="long-col">
        <h3>Long-Term Goals</h3>
        <div class="add-row">
          <input id="long-input" placeholder="Add a goal" />
          <button onclick="addGoal('long')">Add</button>
        </div>
        <ul class="goal-list" id="long-list"></ul>
      </div>
    </div>

    <!-- Pomodoro -->
    <div class="pomodoro-wrap">
      <div class="pomodoro" role="region" aria-label="Pomodoro Timer">
        <h2>Pomodoro Timer</h2>
        <div id="phase" style="font-weight:600; color:#4b5563; margin-bottom:6px;">Focus</div>
        <div id="display">25:00</div>

        <div class="settings">
          <label>
            Focus:
            <select id="focusSelect">
              <option value="25">25 min</option>
              <option value="50">50 min</option>
              <option value="90">90 min</option>
            </select>
          </label>

          <label>
            Break:
            <select id="breakSelect">
              <option value="5">5 min</option>
              <option value="10">10 min</option>
              <option value="15">15 min</option>
            </select>
          </label>

          <label>
            Auto-switch:
            <select id="autoSwitch">
              <option value="yes">Yes</option>
              <option value="no">No</option>
            </select>
          </label>
        </div>

        <div class="controls" style="margin-top:12px;">
          <button id="startBtn">Start</button>
          <button id="pauseBtn" class="secondary">Pause</button>
          <button id="resetBtn" class="secondary">Reset</button>
        </div>

        <div style="margin-top:10px; color:#6b6f78; font-size:13px;">
          Choose any focus/break duration and press Start. When a phase ends it will alert and (optionally) auto-switch.
        </div>
      </div>
    </div>
  </main>

  <footer>
    Made with ‚ù§Ô∏è ‚Äî your goals are saved locally in this browser.
  </footer>

<script>
/* -------------------------
   Goals: editable + localStorage
   ------------------------- */
const keys = { daily: 'study_daily_v1', weekly: 'study_weekly_v1', long: 'study_long_v1' };

function loadGoals() {
  ['daily','weekly','long'].forEach(type => {
    const raw = localStorage.getItem(keys[type]);
    const arr = raw ? JSON.parse(raw) : [];
    renderList(type, arr);
  });
}

function saveGoals(type, arr) {
  localStorage.setItem(keys[type], JSON.stringify(arr));
}

function renderList(type, arr) {
  const ul = document.getElementById(type+'-list');
  ul.innerHTML = '';
  arr.forEach((item, idx) => {
    const li = document.createElement('li');

    const cb = document.createElement('input');
    cb.type = 'checkbox';
    cb.checked = item.done;
    cb.addEventListener('change', () => {
      item.done = cb.checked;
      saveGoals(type, arr);
      text.style.textDecoration = item.done ? 'line-through' : 'none';
      text.style.opacity = item.done ? '0.6' : '1';
    });

    const text = document.createElement('div');
    text.className = 'goal-text';
    text.contentEditable = true;
    text.spellcheck = false;
    text.innerText = item.text;
    text.style.outline = 'none';
    text.style.minWidth = '20px';
    text.style.whiteSpace = 'pre-wrap';
    text.addEventListener('input', () => {
      item.text = text.innerText.trim();
      saveGoals(type, arr);
    });

    const actions = document.createElement('div');
    actions.className = 'goal-actions';
    const del = document.createElement('button');
    del.className = 'small-btn';
    del.innerHTML = 'üóë';
    del.title = "Delete";
    del.addEventListener('click', () => {
      arr.splice(idx,1);
      saveGoals(type, arr);
      renderList(type, arr);
    });

    actions.appendChild(del);
    li.appendChild(cb);
    li.appendChild(text);
    li.appendChild(actions);

    if(item.done){
      text.style.textDecoration = 'line-through';
      text.style.opacity = '0.6';
    }

    ul.appendChild(li);
  });
}

function addGoal(type) {
  const input = document.getElementById(type+'-input');
  const val = input.value.trim();
  if(!val) return;
  const raw = localStorage.getItem(keys[type]);
  const arr = raw ? JSON.parse(raw) : [];
  arr.push({ text: val, done: false });
  saveGoals(type, arr);
  renderList(type, arr);
  input.value = '';
}

/* allow Enter to add quickly */
['daily','weekly','long'].forEach(type=>{
  document.getElementById(type+'-input').addEventListener('keydown', (e)=>{
    if(e.key === 'Enter'){ e.preventDefault(); addGoal(type); }
  });
});

/* -------------------------
   Pomodoro: flexible presets
   ------------------------- */
let totalSeconds = 25*60;
let timer = null;
let isFocus = true;
const display = document.getElementById('display');
const phaseLabel = document.getElementById('phase');

function fmt(s){
  const m = Math.floor(s/60);
  const sec = s % 60;
  return `${m}:${(sec<10?'0':'')+sec}`;
}

function setFromSelects() {
  const f = parseInt(document.getElementById('focusSelect').value,10);
  const b = parseInt(document.getElementById('breakSelect').value,10);
  isFocus = true;
  totalSeconds = f * 60;
  phaseLabel.innerText = 'Focus';
  updateDisplay();
}

function updateDisplay(){ display.innerText = fmt(totalSeconds); }

function startTimer(){
  if(timer) return; // already running
  timer = setInterval(()=>{
    totalSeconds--;
    if(totalSeconds < 0){
      clearInterval(timer);
      timer = null;
      // phase finished
      if(isFocus){
        alert("Focus session finished! Time for a break.");
      } else {
        alert("Break finished! Back to focus.");
      }
      // Auto switch decision
      const autoswitch = document.getElementById('autoSwitch').value === 'yes';
      if(autoswitch){
        // flip
        if(isFocus){
          isFocus = false;
          const b = parseInt(document.getElementById('breakSelect').value,10);
          totalSeconds = b*60;
          phaseLabel.innerText = 'Break';
        } else {
          isFocus = true;
          const f = parseInt(document.getElementById('focusSelect').value,10);
          totalSeconds = f*60;
          phaseLabel.innerText = 'Focus';
        }
        updateDisplay();
        // start again automatically
        startTimer();
      } else {
        // leave timer at 0:00, user decides to reset/start
        totalSeconds = 0;
        updateDisplay();
      }
    } else {
      updateDisplay();
    }
  }, 1000);
}

function pauseTimer(){
  if(timer){
    clearInterval(timer);
    timer = null;
  }
}

function resetTimer(){
  pauseTimer();
  // if currently focus -> set to focus select, else set to break select
  if(isFocus){
    const f = parseInt(document.getElementById('focusSelect').value,10);
    totalSeconds = f*60;
    phaseLabel.innerText = 'Focus';
  } else {
    const b = parseInt(document.getElementById('breakSelect').value,10);
    totalSeconds = b*60;
    phaseLabel.innerText = 'Break';
  }
  updateDisplay();
}

/* Controls */
document.getElementById('startBtn').addEventListener('click', startTimer);
document.getElementById('pauseBtn').addEventListener('click', pauseTimer);
document.getElementById('resetBtn').addEventListener('click', resetTimer);
document.getElementById('focusSelect').addEventListener('change', ()=>{
  // if not running, update display; if running, keep running (user can reset)
  if(!timer){
    isFocus = true;
    const f = parseInt(document.getElementById('focusSelect').value,10);
    totalSeconds = f*60;
    phaseLabel.innerText = 'Focus';
    updateDisplay();
  }
});
document.getElementById('breakSelect').addEventListener('change', ()=>{
  if(!timer && !isFocus){
    const b = parseInt(document.getElementById('breakSelect').value,10);
    totalSeconds = b*60;
    updateDisplay();
  }
});

/* initialize */
window.addEventListener('load', ()=>{
  loadGoals();
  setFromSelects();
});
</script>
</body>
</html>
